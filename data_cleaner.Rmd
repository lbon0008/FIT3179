```{r}
library(tidyverse)
```

```{r}
data <- read_csv("IEA-EV-data.csv")
```
sales$Country[sales$Country=="USA"]<-"United States of America"
```{r}
sales <- data %>%
  group_by(region, parameter) %>%
  summarise(total = sum(value)) %>%
  filter(region != "World") %>%
  filter(region != "Europe") %>%
  filter(region != "Other Europe") %>%
  filter(region != "Rest of the world") %>%
  pivot_wider(names_from = parameter, values_from = total) %>%
  select(-c("Electricity demand", "Oil displacement Mbd", "Oil displacement Mlge"))

sales$region[sales$region=="USA"]<-"United States of America "

```
```{r}
sales_ts <- data %>%
  filter(region != "World") %>%
  filter(region != "Europe") %>%
  filter(region != "Other Europe") %>%
  filter(region != "Rest of the world") %>%
  filter(parameter == "EV sales") %>%
  select(year, region, value) %>%
  filter(year <= 2020) %>%
  filter(region %in% c("Australia", " USA", "China", "Denmark", "United Kingdom", "Germany",
                       "Korea", "France", "Japan", "Sweden")) %>%
  group_by(region, year) %>%
  summarise(value = log(sum(value)))

sales$region[sales_ts$region=="USA"]<-"United States of America "
```

```{r}
write.csv(sales_ts,file='/Users/lukebonso/Desktop/sales_ts.csv', row.names=FALSE)
```

```{r}
stock_ts <- data %>%
  filter(region != "World") %>%
  filter(region != "Europe") %>%
  filter(region != "Other Europe") %>%
  filter(region != "Rest of the world") %>%
  filter(parameter == "EV stock") %>%
  select(year, region, value) %>%
  filter(year <= 2020) %>%
  filter(region %in% c("Australia", " USA", "China", "Denmark", "United Kingdom", "Germany",
                       "Korea", "France", "Japan", "Sweden")) %>%
  group_by(region, year) %>%
  summarise(value = sum(value))

sales$region[sales_ts$region=="USA"]<-"United States of America "
```

```{r}
write.csv(stock_ts,file='/Users/lukebonso/Desktop/stock_ts.csv', row.names=FALSE)
```

